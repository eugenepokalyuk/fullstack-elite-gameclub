{"ast":null,"code":"import _slicedToArray from\"/Users/evgenijpokaluk/Documents/GitHub/fullstack-elite-gameclub/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import styles from'./PlaygroundGrid.module.css';import PlaygroundSquare from'../PlaygroundSquare/PlaygroundSquare';import{fetchComputerGridReplace,fetchComputersData}from'../../utils/api';import{useAppDispatch,useAppSelector}from'../../services/hooks/hooks';import{FETCH_COMPUTERS_FAILURE,FETCH_COMPUTERS_REQUEST,FETCH_COMPUTERS_SUCCESS}from'../../services/actions/computers';import{jsx as _jsx}from\"react/jsx-runtime\";var PlaygroundGrid=function PlaygroundGrid(){var dispatch=useAppDispatch();var playground=useAppSelector(function(store){return store.playground.computers;});var gridSize=200;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),squares=_useState2[0],setSquares=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),dragStart=_useState4[0],setDragStart=_useState4[1];useEffect(function(){var initialSquares=Array.from({length:gridSize},function(_,index){return{id:index};});setSquares(initialSquares);},[]);useEffect(function(){fetchComputersData().then(function(res){dispatch({type:FETCH_COMPUTERS_SUCCESS,payload:res});}).catch(function(error){dispatch({type:FETCH_COMPUTERS_FAILURE,payload:error});});},[dispatch]);var handleDragStart=function handleDragStart(e,id){if(id)setDragStart(id);};var handleDragOver=function handleDragOver(e){e.preventDefault();};var handleDrop=function handleDrop(e,id){e.preventDefault();if(id){fetchComputerGridReplace(dragStart,id);dispatch({type:FETCH_COMPUTERS_REQUEST});fetchComputersData().then(function(res){dispatch({type:FETCH_COMPUTERS_SUCCESS,payload:res});}).catch(function(error){dispatch({type:FETCH_COMPUTERS_FAILURE,payload:error});});}};var renderSquares=function renderSquares(){return squares.map(function(square){return/*#__PURE__*/_jsx(PlaygroundSquare,{id:square.id,onDragStart:handleDragStart,onDragOver:handleDragOver,onDrop:handleDrop,playground:playground},square.id);});};return/*#__PURE__*/_jsx(\"article\",{className:styles.article,children:/*#__PURE__*/_jsx(\"div\",{className:styles.grid,children:renderSquares()})});};export default PlaygroundGrid;","map":{"version":3,"names":["React","useEffect","useState","styles","PlaygroundSquare","fetchComputerGridReplace","fetchComputersData","useAppDispatch","useAppSelector","FETCH_COMPUTERS_FAILURE","FETCH_COMPUTERS_REQUEST","FETCH_COMPUTERS_SUCCESS","jsx","_jsx","PlaygroundGrid","dispatch","playground","store","computers","gridSize","_useState","_useState2","_slicedToArray","squares","setSquares","_useState3","_useState4","dragStart","setDragStart","initialSquares","Array","from","length","_","index","id","then","res","type","payload","catch","error","handleDragStart","e","handleDragOver","preventDefault","handleDrop","renderSquares","map","square","onDragStart","onDragOver","onDrop","className","article","children","grid"],"sources":["/Users/evgenijpokaluk/Documents/GitHub/fullstack-elite-gameclub/frontend/src/components/PlaygroundGrid/PlaygroundGrid.tsx"],"sourcesContent":["import React, { FC, useEffect, useState } from 'react';\nimport styles from './PlaygroundGrid.module.css';\nimport PlaygroundSquare from '../PlaygroundSquare/PlaygroundSquare';\nimport { fetchComputerGridReplace, fetchComputersData } from '../../utils/api';\nimport { useAppDispatch, useAppSelector } from '../../services/hooks/hooks';\nimport { FETCH_COMPUTERS_FAILURE, FETCH_COMPUTERS_REQUEST, FETCH_COMPUTERS_SUCCESS } from '../../services/actions/computers';\n\nconst PlaygroundGrid: FC = () => {\n    const dispatch = useAppDispatch();\n    const playground = useAppSelector((store) => store.playground.computers);\n    const gridSize = 200;\n    const [squares, setSquares] = useState<{ id: number }[]>([]);\n    const [dragStart, setDragStart] = useState<number>();\n\n    useEffect(() => {\n        const initialSquares = Array.from({ length: gridSize }, (_, index) => {\n            return { id: index };\n        });\n        setSquares(initialSquares);\n    }, []);\n\n    useEffect(() => {\n        fetchComputersData()\n            .then(res => {\n                dispatch({ type: FETCH_COMPUTERS_SUCCESS, payload: res });\n            })\n            .catch(error => {\n                dispatch({ type: FETCH_COMPUTERS_FAILURE, payload: error });\n            });\n    }, [dispatch])\n\n    const handleDragStart = (e: React.DragEvent<HTMLDivElement>, id: number) => {\n        if (id)\n            setDragStart(id);\n    };\n\n    const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {\n        e.preventDefault();\n    };\n\n    const handleDrop = (e: React.DragEvent<HTMLDivElement>, id: number) => {\n        e.preventDefault();\n\n        if (id) {\n            fetchComputerGridReplace(dragStart, id);\n\n            dispatch({ type: FETCH_COMPUTERS_REQUEST });\n            fetchComputersData()\n                .then(res => {\n                    dispatch({ type: FETCH_COMPUTERS_SUCCESS, payload: res });\n                })\n                .catch(error => {\n                    dispatch({ type: FETCH_COMPUTERS_FAILURE, payload: error });\n                });\n        }\n    };\n\n    const renderSquares = () => {\n        return squares.map((square) => (\n            <PlaygroundSquare\n                key={square.id}\n                id={square.id}\n                onDragStart={handleDragStart}\n                onDragOver={handleDragOver}\n                onDrop={handleDrop}\n                playground={playground}\n            />\n        ));\n    };\n\n    return (\n        <article className={styles.article}>\n            <div className={styles.grid}>\n                {renderSquares()}\n            </div>\n        </article>\n    );\n}\n\nexport default PlaygroundGrid;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}